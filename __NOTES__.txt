
= TODOS =

- spec for REST API
    - NOTE: This is heavily inspired by the ATOM publishing protocol
    - CRUD actions
        - listing
            - listing is done by GETing to the URI of a collection
            - the result is basically a list of resources, nothing more
        - creation
            - creation is done by POSTing to the URI of a collection
            - returns a 201 status
            - the response Location header should provide the link to read the resource
            - the newly created resource should be in the body of the response
                - the resource should include links that
                  provide hrefs for the various other actions
        - read
            - reading is done by GETing the specified reading URI
                - the resource id should be embedded in the URI
        - update
            - updating is done by PUTing to the specified update URI
                - the resource id should be embedded in the URI
                - this URI may or may not be the same as the read URI (API designers choice)
                - you need only PUT the resource body data, which is not required to have an id
                  the associated metadata (links, etc) are considered read-only and the
                  responsibility of the server so there is no need for it to be returned
            - the updated resource is sent back in the body of the request
        - delete
            - deletion is done by sending DELETE to the specified deletion URI
                - the id should be embedded in the URI
                - this URI may or may not be the same as the read URI (API designers choice)
    - Caching options
        - we should support eTags and conditional GETS, but this is more for the client end
            - see: http://www.atomenabled.org/developers/protocol/atom-protocol-spec.php#edit-no-lost-update
            - this will allow us to do two things
                1) cache more effectively
                2) detect conflicts
            - this should gel with the 'version' field in the resource spec
    - Media (binary data)
        - see: http://www.atomenabled.org/developers/protocol/atom-protocol-spec.php#media-link-entries

- Jackalope::ResourceRepository
    - ponder some kind of Resource wrapper that
      could be a default, but optional, something like
        - {
              id       : 53237372,
              resource : { ... the data goes here ... },
              version  : <uuid>,
              links    : {
                  { relation : "self", href : "/53237372/update", method : "POST" },
                  ... more links ...
              }
          }
        - keeping the ID on the outside will help keep
          the data inside the resource pure since the ID
          is really arbitrary as far as the data is concerned
        - the elements of the link are also the elements
          that the Router would use to construct the URLs
          so that fits together nicely
            - read up on http://www.w3.org/TR/xlink/
        - ponder adding a version string, so that we can
          take advantage of ETags
            - read up on http://en.wikipedia.org/wiki/HTTP_ETag
        - this is also a generic structure that the
          ResourceRepository can know how to deal with
          and leave the processing of the internal resource
          to consumers of the REsourceRepository role


- Jackalope::Web::Service
    - we should pass in a Factory to the Web::Service and the factory
      can choose which type of target object based on patterns
      if no pattern exists then ...
      - target_class in the link->metadata should handle names like Moose Traits and Catalyst plugins
          +Some::Full::Path => is handled straight
          Another           => becomes Jackalope::Route::Target::Another

- Jackalope::Web::Route::Target::REST::
    - these should be able to rely on some simple conventions
      in the links for the various CRUD actions and be able to
      ask the router for the URIs
    - we need to write defaults into the route so that they
      can be idenfified from the outside and URIs can be created
        - the method and relation should do enough
    - it can make some assumptions about the repository
      knowing that it is going to use the Jackalope::ResourceRepository
      role, this should simplify the metadata even more
    - Remember, PUT actions are Idempotent, you should always return
      the same resource if it hasn't been changed
    - read about 201 Created in http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html

- Jackalope::Web::Error::
    - a set of Throwable exceptions for the various
      HTTP status codes
        - 400 Bad Request
        - 404 Not Found
        - 409 Conflict
        - 500 server error
    - these can be thrown by the Model classes to
      communicate with the Route::Target classes

- Jackalope.Schema.Repository
    - refactor the compilation process
      to match the Perl version
        - the 003-web.t.js tests are broken because of this

== LOW PRIORITY ==

- Jackalope.js
    - add some kind of basic Bread-Board type thing

- Jackalope::Schema::Spec & Jackalope.Schema.Spec
    - perhaps use that description cleanup method in GenerateSpec on the actual spec

- Test::Jackalope & Test.Jackalope
    - write .toJSON methods that strip the __compiled_* stuff from the output of schemas
    - validation_fail should also take some kind of
      test to check the right error appears
        - fixtures will need to support this too

- test_fixtures
    - write more of them

- Jackalope::Schema::Validator::Core
    - make it use Moose types to check against

- Jackalope::Serializer
    - Jackalope::Serializer::XML (TODO - perigrin)
    - Jackalope::Serializer::YAML (why??)

== PERHAPS ==

- Jackalope::API::*
    - create a set of roles that can be used
      in the Bread::Board config to typemap
      to concrete classes
    - NOTE: I tried this, it didn't feel right
      but should keep the idea around just in case

== LINKS ==


http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html
http://en.wikipedia.org/wiki/Representational_State_Transfer
http://martinfowler.com/articles/richardsonMaturityModel.html
http://code.msdn.microsoft.com/cannonicalRESTEntity
http://www.w3.org/TR/xforms/
http://thisweekinrest.wordpress.com/
http://tools.ietf.org/html/rfc5988
http://alexscordellis.blogspot.com/2010/11/restful-architecture-what-should-we-put.html
http://restinpractice.com/default.aspx

- ATOM
    - http://www.atomenabled.org/

- LINK relations
    - http://www.iana.org/assignments/link-relations/link-relations.xhtml

- HTTP status codes
    - https://demo.staging.fellowshiponeapi.com/v1/Util/HttpStatusCodes.help




